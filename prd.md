# 低空云平台 Demo 项目需求规格说明书 (PRD)

## 1. 项目概述

### 1.1 背景与目标
随着低空经济的快速发展，无人机（UAV）在物流配送、巡检监测、应急救援等领域的应用日益广泛。本项目旨在构建一个基于Web的**低空飞行管理平台演示系统**，验证利用三维GIS技术进行无人机航线规划、飞行仿真及机队管理的可行性与效果。

### 1.2 项目愿景
打造一个直观、高效、可视化的低空飞行管理前端原型，展示核心的“规划-仿真-管理”闭环能力，为后续接入实时测控数据和复杂业务逻辑奠定基础。

## 2. 用户角色

| 角色 | 描述 | 主要职责 |
| :--- | :--- | :--- |
| **系统操作员** | 平台的主要使用者 | 负责航线规划、飞行仿真演示、无人机参数管理及空域申请演示。 |

## 3. 功能需求

### 3.1 三维地图基础 (Basic Map)
基于 Mars3D 引擎，提供高性能的三维地理信息展示能力。
- **地形/影像加载**：支持标准地形数据和卫星影像底图加载。
- **视图控制**：支持旋转、缩放、平移、倾斜等三维视角操作。
- **基础工具**：
  - **量算**：距离、面积、高度测量。
  - **标绘**：点、线、面、文字等基础图形标记。
  - **图层管理**：显示/隐藏空域、禁飞区等图层（预留）。

### 3.2 机型管理 (Aircraft Management)
对无人机机队的基本参数进行管理。
- **机型列表**：展示现有无人机型号及其关键参数（续航、航程、载重等）。
- **机型CRUD**：
  - **新增**：录入新机型（名称、厂商、参数）。
  - **编辑**：修改现有机型配置。
  - **删除**：移除废弃机型。
- **数据来源**：当前阶段使用前端 Mock 数据模拟后端接口。

### 3.3 航线规划 (Route Planning)
提供直观的交互式航线设计工具。
- **手动规划**：
  - 在三维地图上点击添加航点（Waypoint）。
  - 支持拖拽调整航点位置和高度。
  - 设置航点动作（悬停、拍照、变向等）。
- **参数配置**：
  - 设置全局飞行速度、默认高度。
  - 计算预计飞行时间和距离。
- **自动/智能规划** (Auto Planning)：
  - *（待完善）* 基于起终点和禁飞区自动生成最优路径。
- **保存与导出**：
  - 将规划好的航线保存至本地（LocalStorage/JSON）。
  - 导出为标准格式（如 GeoJSON/KML）。

### 3.4 飞行仿真 (Flight Simulation)
基于规划航线进行可视化的模拟飞行验证。
- **仿真控制**：
  - **播放/暂停**：控制飞行演示的开始与暂停。
  - **停止**：重置仿真状态。
  - **倍速播放**：支持 1x, 2x, 5x 等速度调节。
- **视角跟随**：
  - **锁定视角**：相机跟随无人机第一人称视角。
  - **自由视角**：允许用户在仿真过程中自由观察。
- **实时状态显示**：
  - 动态显示当前的飞行高度、速度、剩余里程。

### 3.5 航线管理 (Route Management)
管理历史规划数据。
- **航线列表**：查看已保存的航线方案。
- **加载/预览**：在地图上快速预览选定航线。
- **编辑/删除**：对旧航线进行修改或清理。

### 3.6 空域申请 (Airspace Application)
模拟飞行任务的空域申报流程（当前为演示表单）。
- **申请填报**：填写飞行任务、时间、空域范围、使用机型。
- **状态跟进**：查看申请审批状态（模拟通过/拒绝）。

## 4. 非功能需求

### 4.1 性能要求
- **渲染流畅度**：在主流配置PC上，三维场景帧率不低于 30FPS。
- **加载速度**：首屏加载时间不超过 3秒（视网络环境）。
- **仿真精度**：飞行轨迹插值平滑，无明显卡顿或跳变。

### 4.2 交互体验
- **UI风格**：采用 **Ant Design Vue** 组件库，保持界面简洁、专业。
- **响应式布局**：适配常见桌面显示器分辨率（1920x1080 及以上推荐）。
- **暗黑模式**：默认支持暗色主题，适配指挥大屏场景。

### 4.3 技术约束
- **前端框架**：Vue 3 + TypeScript + Vite。
- **地图引擎**：Mars3D (Cesium)。
- **数据存储**：目前优先使用 Mock + LocalStorage，需预留 API 接口层以便未来对接真实后端。

## 5. 项目结构与模块划分 

```
src/
├── widgets/                # 核心业务模块
│   ├── basic/              # 基础底座 (地图工具)
│   ├── aircraft-management/# 机型管理 Widget
│   ├── route-planning/     # 手动规划 Widget
│   ├── auto-route-planning/# 自动算法 Widget
│   ├── route-management/   # 航线数据 Widget
│   ├── flight-demo/        # 仿真引擎 Widget
│   └── airspace-application/# 空域申报 Widget
├── api/                    # 接口定义 (含Mock)
└── components/             # 公共UI组件
```

## 6. 后续规划 (Roadmap)
1.  **后端对接**：替换 `src/api` 中的 Mock 数据，对接真实 Java/Go 后端。
2.  **实时测控**：引入 WebSocket，接入真实无人机遥测数据，实现“数字孪生”。
3.  **复杂算法**：引入后端路径规划算法（A*/RRT），支持地形避障。
4.  **多机协同**：支持编队飞行仿真与防碰撞演示。

---
**版本记录**
- v0.1 | 2026-01-26 | 初始草稿 | Antigravity
